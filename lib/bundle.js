module.exports=function(r){var e={};function n(i){if(e[i])return e[i].exports;var t=e[i]={i:i,l:!1,exports:{}};return r[i].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=r,n.c=e,n.d=function(r,e,i){n.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:i})},n.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},n.t=function(r,e){if(1&e&&(r=n(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var t in r)n.d(i,t,function(e){return r[e]}.bind(null,t));return i},n.n=function(r){var e=r&&r.__esModule?function(){return r.default}:function(){return r};return n.d(e,"a",e),e},n.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},n.p="",n(n.s=25)}([function(r,e){r.exports=require("react")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-symbols")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptor")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/instance/for-each")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptors")},function(r,e){r.exports=require("react-resize-zoom")},function(r,e){r.exports=require("react-free-draggable")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/object/keys")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/instance/filter")},function(r,e){r.exports=require("@babel/runtime-corejs3/helpers/esm/defineProperty")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/instance/includes")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/reflect/construct")},function(r,e){r.exports=require("classnames")},function(r,e){r.exports=require("@babel/runtime-corejs3/helpers/esm/slicedToArray")},function(r,e){r.exports=require("@babel/runtime-corejs3/helpers/esm/getPrototypeOf")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/instance/some")},function(r,e){r.exports=require("@babel/runtime-corejs3/helpers/esm/extends")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/instance/map")},function(r,e){r.exports=require("@babel/runtime-corejs3/helpers/esm/classCallCheck")},function(r,e){r.exports=require("@babel/runtime-corejs3/helpers/esm/createClass")},function(r,e){r.exports=require("@babel/runtime-corejs3/helpers/esm/inherits")},function(r,e){r.exports=require("@babel/runtime-corejs3/helpers/esm/possibleConstructorReturn")},function(r,e){r.exports=require("@babel/runtime-corejs3/helpers/esm/toConsumableArray")},function(r,e){r.exports=require("@babel/runtime-corejs3/core-js/instance/sort")},function(r,e){r.exports=require("klona")},function(r,e,n){"use strict";n.r(e),n.d(e,"DragGridItem",(function(){return fr})),n.d(e,"DragTypes",(function(){return $}));var i=n(7),t=n.n(i),o=n(1),u=n.n(o),a=n(8),d=n.n(a),l=n(2),s=n.n(l),c=n(3),f=n.n(c),p=n(4),v=n.n(p),g=n(16),h=n.n(g),b=n(9),y=n.n(b),m=n(13),G=n.n(m),x=n(10),Y=n.n(x),z=n(17),j=n.n(z),w=n(0),X=n.n(w),D=n(11),P=n.n(D),E=n(18),S=n.n(E),q=n(19),R=n.n(q),O=n(20),T=n.n(O),A=n(21),C=n.n(A),H=n(14),I=n.n(H),W=n(15),M=n.n(W),K=n(22),k=n.n(K),Z=n(23),_=n.n(Z),N=n(24);function B(r,e){var n=t()(r);if(u.a){var i=u()(r);e&&(i=d()(i).call(i,(function(e){return s()(r,e).enumerable}))),n.push.apply(n,i)}return n}function L(r){for(var e=1;e<arguments.length;e++){var n,i,t=null!=arguments[e]?arguments[e]:{};e%2?f()(n=B(Object(t),!0)).call(n,(function(e){y()(r,e,t[e])})):v.a?Object.defineProperties(r,v()(t)):f()(i=B(Object(t))).call(i,(function(e){Object.defineProperty(r,e,s()(t,e))}))}return r}var F,J=function(r,e){return r.GridX===e.GridX&&r.GridY===e.GridY&&r.w===e.w&&r.h===e.h||"number"==typeof r.GridX&&"number"==typeof e.GridX&&"number"==typeof r.GridY&&"number"==typeof e.GridY&&"number"==typeof r.w&&"number"==typeof e.w&&"number"==typeof r.h&&"number"==typeof e.h&&(!(r.GridX+r.w<=e.GridX)&&(!(r.GridX>=e.GridX+e.w)&&(!(r.GridY+r.h<=e.GridY)&&!(r.GridY>=e.GridY+e.h))))},Q=function(r,e){for(var n=0,i=r.length;n<i;n++)if(J(r[n],e))return r[n];return null},U=(F={},function(r,e){if(e.GridX===F.GridX&&e.GridY===F.GridY&&e.w===F.w&&e.h===F.h)return r;F=L({},e);for(var n=null==e?void 0:e.uniqueKey,i=[],t=0;t<(null==r?void 0:r.length);t++){var o=null==r?void 0:r[t];if("number"==typeof(null==e?void 0:e.GridY)&&"number"==typeof o.GridY&&"number"==typeof o.h)if((null==o?void 0:o.uniqueKey)!==n)if(!J(o,e)||null!=o&&o.forbid)null==i||i.push(o);else{var u=void 0;u=e.GridY>o.GridY&&e.GridY<o.GridY+o.h?o.GridY:o.GridY+1;var a=L(L({},o),{},{GridY:u});null==i||i.push(a)}else{var d=L(L({},o),e);null==i||i.push(d)}}return i});var V,$,rr=function(r,e){if(e.forbid)return e;var n=L(L({},e),{},{uniqueKey:e.uniqueKey+""});if(0===r.length)return L(L({},n),{},{GridY:0});for(;;){var i=Q(r,n);if(i&&"number"==typeof i.GridY&&"number"==typeof i.h)return n.GridY=i.GridY+i.h,n;if("number"==typeof(null==n?void 0:n.GridY)&&(n.GridY--,n.GridY<0))return L(L({},n),{},{GridY:0})}},er=(V={},function(r,e){if(e){if(V.GridX===e.GridX&&V.GridY===e.GridY&&V.w===e.w&&V.h===e.h&&V.uniqueKey===e.uniqueKey)return r;V=e}for(var n=function(r){var e=Object(N.klona)(r);return null==e?void 0:_()(e).call(e,(function(r,e){return"number"==typeof r.GridY&&"number"==typeof r.GridX&&"number"==typeof e.GridY&&"number"==typeof e.GridX?r.forbid||e.forbid?0:r.GridY===e.GridY?r.GridX-e.GridX:r.GridY-e.GridY:-1}))}(r),i=Array(r.length),t=[],o=0,u=n.length;o<u;o++){var a=rr(t,n[o]);e&&e.uniqueKey===a.uniqueKey&&(e.GridX=a.GridX,e.GridY=a.GridY),t.push(a),i[o]=a}return i}),nr=function(r,e,n,i){return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&(e+i>r-1&&(e=r-i),e<0&&(e=0),n<0&&(n=0)),{GridX:e,GridY:n}},ir=n(5),tr=n.n(ir),or=n(6),ur=n.n(or),ar=n(12),dr=n.n(ar);function lr(r,e){var n=t()(r);if(u.a){var i=u()(r);e&&(i=d()(i).call(i,(function(e){return s()(r,e).enumerable}))),n.push.apply(n,i)}return n}function sr(r){for(var e=1;e<arguments.length;e++){var n,i,t=null!=arguments[e]?arguments[e]:{};e%2?f()(n=lr(Object(t),!0)).call(n,(function(e){y()(r,e,t[e])})):v.a?Object.defineProperties(r,v()(t)):f()(i=lr(Object(t))).call(i,(function(e){Object.defineProperty(r,e,s()(t,e))}))}return r}function cr(r){var e=function(){if("undefined"==typeof Reflect||!P.a)return!1;if(P.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(P()(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var n,i=I()(r);if(e){var t=I()(this).constructor;n=P()(i,arguments,t)}else n=i.apply(this,arguments);return C()(this,n)}}!function(r){r.dragStart="dragStart",r.draging="draging",r.dragEnd="dragEnd",r.resizeStart="resizeStart",r.resizing="resizing",r.resizeEnd="resizeEnd"}($||($={}));var fr=function(r){T()(n,r);var e=cr(n);function n(r){var i;return S()(this,n),(i=e.call(this,r)).lastZindex=void 0,i.calcolsWidth=function(){var r=i.props,e=r.containerWidth,n=r.cols,t=r.containerPadding,o=r.margin;return o?(e-2*t[0]-o[0]*(n+1))/n:(e-2*t[0]-0*(n+1))/n},i.calGridXYToPx=function(r,e){var n,t,o=i.props,u=o.margin,a=o.rowHeight;return u||(u=[0,0]),"number"==typeof r&&(n=Math.round(r*i.calcolsWidth()+(r+1)*u[0])),"number"==typeof e&&(t=Math.round(e*a+u[1]*(e+1))),{x:n,y:t}},i.calPxToGridXY=function(r,e){var n=i.props,t=n.margin,o=n.containerWidth,u=n.cols,a=n.w,d=n.rowHeight,l=Math.round(r/o*u),s=Math.round(e/(d+(t?t[1]:0)));return nr(u,l,s,a)},i.calWHtoPx=function(r,e){var n,t,o=i.props,u=o.margin,a=o.rowHeight;return u||(u=[0,0]),"number"==typeof r&&(n=Math.round(r*i.calcolsWidth()+(r-1)*u[0])),"number"==typeof e&&(t=Math.round(e*a+(e-1)*u[1])),{wPx:n,hPx:t}},i.calPxToWH=function(r,e){var n=i.props,t=n.rowHeight,o=n.cols,u=n.GridX,a=i.calcolsWidth();return function(r,e,n,i){var t=n,o=i;return"number"==typeof e&&"number"==typeof n&&"number"==typeof i&&(e+n>r-1&&(t=r-e),n<1&&(t=1),i<1&&(o=1)),{w:t,h:o}}(o,u,Math.round((r-.5*a)/a),Math.round((e-.5*t)/t))},i.addEventParams=function(r){var e=i.props;return sr({GridX:e.GridX,GridY:e.GridY,w:e.w,h:e.h,uniqueKey:e.uniqueKey,margin:e.margin,forbid:e.forbid,handle:e.handle,dragAxis:e.dragAxis,resizeAxis:e.resizeAxis},r)},i.onDragStart=function(r,e){var n,t,o,u;if(i.setState({dragType:$.dragStart}),e&&i.canDrag()){i.lastZindex=null==e||null===(n=e.node)||void 0===n||null===(t=n.style)||void 0===t?void 0:t.zIndex,"999"!=(null==e||null===(o=e.node)||void 0===o||null===(u=o.style)||void 0===u?void 0:u.zIndex)&&(e.node.style.zIndex="999");var a=e.x,d=void 0===a?0:a,l=e.y,s=void 0===l?0:l,c=i.calPxToGridXY(d,s),f=c.GridX,p=c.GridY;i.props.onDragStart&&i.props.onDragStart(i.addEventParams({GridX:f,GridY:p}),r)}},i.onDrag=function(r,e){var n,t;if(i.setState({dragType:$.draging}),e&&i.canDrag()){"999"!=(null==e||null===(n=e.node)||void 0===n||null===(t=n.style)||void 0===t?void 0:t.zIndex)&&(e.node.style.zIndex="999");var o=e.x,u=void 0===o?0:o,a=e.y,d=void 0===a?0:a,l=i.calPxToGridXY(u,d),s=l.GridX,c=l.GridY;i.props.onDrag&&i.props.onDrag(i.addEventParams({GridX:s,GridY:c}),r)}},i.onDragEnd=function(r,e){if(i.setState({dragType:$.dragEnd}),e&&i.canDrag()){e.node.style.zIndex=i.lastZindex;var n=e.x,t=void 0===n?0:n,o=e.y,u=void 0===o?0:o,a=i.calPxToGridXY(t,u),d=a.GridX,l=a.GridY;i.props.onDragEnd&&i.props.onDragEnd(i.addEventParams({GridX:d,GridY:l}),r)}},i.onResizeStart=function(r,e){var n,t,o,u;i.setState({dragType:$.resizeStart}),e&&i.canResize()&&(i.lastZindex=null==e||null===(n=e.node)||void 0===n||null===(t=n.style)||void 0===t?void 0:t.zIndex,"999"!=(null==e||null===(o=e.node)||void 0===o||null===(u=o.style)||void 0===u?void 0:u.zIndex)&&(e.node.style.zIndex="999"),i.props.onResizeStart&&i.props.onResizeStart(i.addEventParams({}),r))},i.onResizing=function(r,e){var n,t;if(i.setState({dragType:$.resizing}),e&&i.canResize()){"999"!=(null==e||null===(n=e.node)||void 0===n||null===(t=n.style)||void 0===t?void 0:t.zIndex)&&(e.node.style.zIndex="999");var o=e.width,u=e.height,a=i.calPxToWH(o,u),d=a.w,l=a.h;i.props.onResizing&&i.props.onResizing(i.addEventParams({w:d,h:l}),r)}},i.onResizeEnd=function(r,e){if(i.setState({dragType:$.resizeEnd}),e&&i.canResize()){e.node.style.zIndex=i.lastZindex;var n=e.width,t=e.height,o=i.calPxToWH(n,t),u=o.w,a=o.h;i.props.onResizeEnd&&i.props.onResizeEnd(i.addEventParams({w:u,h:a}),r)}},i.canDrag=function(){var r=i.props,e=r.dragAxis,n=r.forbid,t=null===or.DragAxisCode||void 0===or.DragAxisCode?void 0:M()(or.DragAxisCode).call(or.DragAxisCode,(function(r){return null==e?void 0:Y()(e).call(e,r)}));return!n&&(!e||t)},i.canResize=function(){var r=i.props,e=r.resizeAxis,n=r.forbid,t=null===ir.DirectionCode||void 0===ir.DirectionCode?void 0:M()(ir.DirectionCode).call(ir.DirectionCode,(function(r){return null==e?void 0:Y()(e).call(e,r)}));return!n&&(!e||t)},i.lastZindex="",i.state={dragType:void 0},i}return R()(n,[{key:"render",value:function(){var r,e,n=this.props,i=n.w,t=n.h,o=n.style,u=n.bounds,a=n.GridX,d=n.GridY,l=n.handle,s=n.dragAxis,c=n.resizeAxis,f=n.children,p=n.className,v=this.state.dragType,g=this.calGridXYToPx(a,d),h=g.x,b=g.y,y=this.calWHtoPx(i,t),m=y.wPx,G=y.hPx,x=dr()((null==f||null===(r=f.props)||void 0===r?void 0:r.className)||"",p),z=null===(e=v&&[$.draging,$.resizing])||void 0===e?void 0:Y()(e).call(e,v);return X.a.createElement(ur.a,{className:x,axis:this.canDrag()?s:[],bounds:u,handle:l,onDragStart:this.onDragStart,onDrag:this.onDrag,onDragStop:this.onDragEnd,x:h,y:b},X.a.createElement(tr.a,{onResizeStart:this.onResizeStart,onResizeMoving:this.onResizing,onResizeEnd:this.onResizeEnd,axis:this.canResize()?c:[],width:m,height:G},X.a.cloneElement(X.a.Children.only(f),{style:sr(sr(sr({},f.props.style),o),{},{position:"absolute",transition:z||!this.canDrag()?"":"all .2s ease-out"})})))}}]),n}(X.a.Component);function pr(r,e){var n=t()(r);if(u.a){var i=u()(r);e&&(i=d()(i).call(i,(function(e){return s()(r,e).enumerable}))),n.push.apply(n,i)}return n}function vr(r){for(var e=1;e<arguments.length;e++){var n,i,t=null!=arguments[e]?arguments[e]:{};e%2?f()(n=pr(Object(t),!0)).call(n,(function(e){y()(r,e,t[e])})):v.a?Object.defineProperties(r,v()(t)):f()(i=pr(Object(t))).call(i,(function(e){Object.defineProperty(r,e,s()(t,e))}))}return r}fr.defaultProps={cols:12,containerWidth:500,containerPadding:[0,0],margin:[10,10],rowHeight:30,w:1,h:1,dragAxis:or.DragAxisCode,resizeAxis:ir.DirectionCode};var gr=X.a.forwardRef((function(r,e){var n,i,t,o=Object(w.useState)([]),u=G()(o,2),a=u[0],d=u[1],l=Object(w.useState)(),s=G()(l,2),c=s[0],f=s[1],p=Object(w.useState)({}),v=G()(p,2),g=v[0],b=v[1],y=Object(w.useRef)();Object(w.useImperativeHandle)(e,(function(){return{getLayout:m}}));var m=function(){return a};Object(w.useEffect)((function(){D(r.layout,null==r?void 0:r.cols)}),[r.layout,null==r?void 0:r.cols]);var x,z,D=function(r,e){var n=function(r,e){for(var n=k()(r),i=0;i<(null==r?void 0:r.length)-1;i++){var t,o;n[i].GridX=null===(t=nr(e,n[i].GridX,n[i].GridY,n[i].w))||void 0===t?void 0:t.GridX,n[i].GridY=null===(o=nr(e,n[i+1].GridX,n[i+1].GridY,n[i+1].w))||void 0===o?void 0:o.GridY,J(n[i],n[i+1])&&(n=U(n,n[i]))}return n}(r,e),i=er(n,void 0);d(i)},P=function(e,n){f($.dragStart),b({GridX:null==e?void 0:e.GridX,GridY:null==e?void 0:e.GridY,w:null==e?void 0:e.w,h:null==e?void 0:e.h}),r.onDragStart&&r.onDragStart(e,a,void 0,n)},E=function(e,n){f($.draging);var i=U(a,e),t=er(i,e);d(t),b((function(r){return vr(vr({},r),{},{GridX:null==e?void 0:e.GridX,GridY:null==e?void 0:e.GridY})})),r.onDrag&&r.onDrag(e,a,t,n)},S=function(e,n){f($.dragEnd);var i=er(a,void 0);d(i),r.onDragEnd&&r.onDragEnd(e,a,i,n)},q=function(e,n){f($.resizeStart),b({GridX:null==e?void 0:e.GridX,GridY:null==e?void 0:e.GridY,w:null==e?void 0:e.w,h:null==e?void 0:e.h}),r.onResizeStart&&r.onResizeStart(e,a,void 0,n)},R=function(e,n){var i=U(a,e),t=er(i,e);d(t),b((function(r){return vr(vr({},r),{},{w:null==e?void 0:e.w,h:null==e?void 0:e.h})})),r.onResizing&&r.onResizing(e,a,t,n)},O=function(e,n){f($.resizeEnd);var i=er(a,void 0);d(i),r.onResizeEnd&&r.onResizeEnd(e,a,i,n)},T=dr()("DraggerLayout",null==r?void 0:r.className);return X.a.createElement("div",{ref:y,className:T,style:vr(vr({},null==r?void 0:r.style),{},{width:(null==r?void 0:r.width)||(null===(n=y.current)||void 0===n||null===(i=n.style)||void 0===i?void 0:i.width),height:(x=function(r){for(var e,n=0,i=0,t=r.length;i<t;i++)"number"==typeof r[i].GridY&&"number"==typeof r[i].h&&(e=r[i].GridY+r[i].h)>n&&(n=e);return n}(a),z=r.padding?r.padding[1]:r.margin[1],x*r.rowHeight+(x-1)*r.margin[1]+2*z+"px")})},j()(t=X.a.Children).call(t,null==r?void 0:r.children,(function(e){if(e)return function(e){if(null!=a&&a.length){var n,i=null==e?void 0:e.key,t=function(r,e){for(var n=0,i=null==r?void 0:r.length;n<i;n++)if(r[n].uniqueKey===e)return r[n]}(a,i);if(!t)return;return X.a.createElement(fr,h()({},t,{margin:null==r?void 0:r.margin,cols:null==r?void 0:r.cols,bounds:y.current,containerWidth:null==r?void 0:r.width,containerPadding:null!==(n=null==r?void 0:r.padding)&&void 0!==n?n:[0,0],rowHeight:null==r?void 0:r.rowHeight,onDragStart:P,onDrag:E,onDragEnd:S,uniqueKey:i,onResizeStart:q,onResizing:R,onResizeEnd:O}),e)}}(e)})),function(){var e,n;if(c&&!Y()(e=[$.dragEnd,$.resizeEnd]).call(e,c))return X.a.createElement(fr,{margin:null==r?void 0:r.margin,cols:null==r?void 0:r.cols,bounds:y.current,containerWidth:null==r?void 0:r.width,containerPadding:null!==(n=null==r?void 0:r.padding)&&void 0!==n?n:[0,0],rowHeight:null==r?void 0:r.rowHeight,style:{background:"rgba(15,15,15,0.3)",transition:" all .15s ease-out"},GridX:g.GridX,GridY:g.GridY,w:g.w,h:g.h,dragAxis:[],resizeAxis:[]},X.a.createElement("div",null))}())}));e.default=gr}]);