module.exports=function(e){var r={};function n(i){if(r[i])return r[i].exports;var t=r[i]={i:i,l:!1,exports:{}};return e[i].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=e,n.c=r,n.d=function(e,r,i){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)n.d(i,t,function(r){return e[r]}.bind(null,t));return i},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=26)}([function(e,r){e.exports=require("react")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-symbols")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptor")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/for-each")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptors")},function(e,r){e.exports=require("react-resize-zoom")},function(e,r){e.exports=require("react-free-draggable")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/object/keys")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/filter")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/defineProperty")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/includes")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/toConsumableArray")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/reflect/construct")},function(e,r){e.exports=require("classnames")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/slicedToArray")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/getPrototypeOf")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/some")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/extends")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/map")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/classCallCheck")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/createClass")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/inherits")},function(e,r){e.exports=require("@babel/runtime-corejs3/helpers/esm/possibleConstructorReturn")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/concat")},function(e,r){e.exports=require("@babel/runtime-corejs3/core-js/instance/sort")},function(e,r){e.exports=require("klona")},function(e,r,n){"use strict";n.r(r),n.d(r,"DragGridItem",(function(){return he})),n.d(r,"DragTypes",(function(){return re}));var i=n(7),t=n.n(i),o=n(1),u=n.n(o),d=n(8),l=n.n(d),a=n(2),c=n.n(a),s=n(3),f=n.n(s),v=n(4),p=n.n(v),h=n(17),b=n.n(h),y=n(9),m=n.n(y),G=n(14),g=n.n(G),x=n(10),Y=n.n(x),j=n(18),z=n.n(j),w=n(0),R=n.n(w),X=n(12),P=n.n(X),E=n(11),q=n.n(E),S=n(19),O=n.n(S),M=n(20),D=n.n(M),T=n(21),C=n.n(T),H=n(22),I=n.n(H),W=n(15),K=n.n(W),k=n(16),Z=n.n(k),_=n(23),N=n.n(_),A=n(24),B=n.n(A),L=n(25);function F(e,r){var n=t()(e);if(u.a){var i=u()(e);r&&(i=l()(i).call(i,(function(r){return c()(e,r).enumerable}))),n.push.apply(n,i)}return n}function J(e){for(var r=1;r<arguments.length;r++){var n,i,t=null!=arguments[r]?arguments[r]:{};r%2?f()(n=F(Object(t),!0)).call(n,(function(r){m()(e,r,t[r])})):p.a?Object.defineProperties(e,p()(t)):f()(i=F(Object(t))).call(i,(function(r){Object.defineProperty(e,r,c()(t,r))}))}return e}var Q,U=function(e,r){return e.GridX===r.GridX&&e.GridY===r.GridY&&e.w===r.w&&e.h===r.h||"number"==typeof e.GridX&&"number"==typeof r.GridX&&"number"==typeof e.GridY&&"number"==typeof r.GridY&&"number"==typeof e.w&&"number"==typeof r.w&&"number"==typeof e.h&&"number"==typeof r.h&&(!(e.GridX+e.w<=r.GridX)&&(!(e.GridX>=r.GridX+r.w)&&(!(e.GridY+e.h<=r.GridY)&&!(e.GridY>=r.GridY+r.h))))},V=function(e,r){for(var n=0,i=e.length;n<i;n++)if(U(e[n],r))return e[n];return null},$=(Q={},function(e,r){if(r.GridX===Q.GridX&&r.GridY===Q.GridY&&r.w===Q.w&&r.h===Q.h)return e;Q=J({},r);for(var n=null==r?void 0:r.uniqueKey,i=[],t=0;t<(null==e?void 0:e.length);t++){var o=null==e?void 0:e[t];if("number"==typeof(null==r?void 0:r.GridY)&&"number"==typeof o.GridY&&"number"==typeof o.h)if((null==o?void 0:o.uniqueKey)!==n)if(!U(o,r)||null!=o&&o.forbid)null==i||i.push(o);else{var u=void 0;u=r.GridY>o.GridY&&r.GridY<o.GridY+o.h?o.GridY:o.GridY+1;var d=J(J({},o),{},{GridY:u});null==i||i.push(d)}else{var l=J(J({},o),r);null==i||i.push(l)}}return i});var ee,re,ne,ie=function(e,r){if(r.forbid)return r;var n=J(J({},r),{},{uniqueKey:r.uniqueKey+""});if(0===e.length)return J(J({},n),{},{GridY:0});for(;;){var i=V(e,n);if(i&&"number"==typeof i.GridY&&"number"==typeof i.h)return n.GridY=i.GridY+i.h,n;if("number"==typeof(null==n?void 0:n.GridY)&&(n.GridY--,n.GridY<0))return J(J({},n),{},{GridY:0})}},te=(ee={},function(e,r){if(r){if(ee.GridX===r.GridX&&ee.GridY===r.GridY&&ee.w===r.w&&ee.h===r.h&&ee.uniqueKey===r.uniqueKey)return e;ee=r}for(var n=function(e){var r=Object(L.klona)(e);return null==r?void 0:B()(r).call(r,(function(e,r){return"number"==typeof e.GridY&&"number"==typeof e.GridX&&"number"==typeof r.GridY&&"number"==typeof r.GridX?e.forbid||r.forbid?0:e.GridY===r.GridY?e.GridX-r.GridX:e.GridY-r.GridY:-1}))}(e),i=Array(e.length),t=[],o=0,u=n.length;o<u;o++){var d=ie(t,n[o]);r&&r.uniqueKey===d.uniqueKey&&(r.GridX=d.GridX,r.GridY=d.GridY),t.push(d),i[o]=d}return i}),oe=function(e,r,n,i){return"number"==typeof r&&"number"==typeof n&&"number"==typeof i&&(r+i>e-1&&(r=e-i),r<0&&(r=0),n<0&&(n=0)),{GridX:r,GridY:n}},ue=n(5),de=n.n(ue),le=n(6),ae=n.n(le),ce=n(13),se=n.n(ce);function fe(e,r){var n=t()(e);if(u.a){var i=u()(e);r&&(i=l()(i).call(i,(function(r){return c()(e,r).enumerable}))),n.push.apply(n,i)}return n}function ve(e){for(var r=1;r<arguments.length;r++){var n,i,t=null!=arguments[r]?arguments[r]:{};r%2?f()(n=fe(Object(t),!0)).call(n,(function(r){m()(e,r,t[r])})):p.a?Object.defineProperties(e,p()(t)):f()(i=fe(Object(t))).call(i,(function(r){Object.defineProperty(e,r,c()(t,r))}))}return e}function pe(e){var r=function(){if("undefined"==typeof Reflect||!P.a)return!1;if(P.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(P()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=K()(e);if(r){var t=K()(this).constructor;n=P()(i,arguments,t)}else n=i.apply(this,arguments);return I()(this,n)}}!function(e){e.Start="start",e.Move="move",e.End="end",e.ResizeStart="resizeStart",e.Resizing="resizing",e.ResizeEnd="resizeEnd"}(re||(re={}));var he=function(e){C()(n,e);var r=pe(n);function n(e){var i;return O()(this,n),(i=r.call(this,e)).lastZindex=void 0,i.calcolsWidth=function(){var e=i.props,r=e.containerWidth,n=e.cols,t=e.containerPadding,o=e.margin;return o?(r-2*t[0]-o[0]*(n+1))/n:(r-2*t[0]-0*(n+1))/n},i.calGridXYToPx=function(e,r){var n,t,o=i.props,u=o.margin,d=o.rowHeight;return u||(u=[0,0]),"number"==typeof e&&(n=Math.round(e*i.calcolsWidth()+(e+1)*u[0])),"number"==typeof r&&(t=Math.round(r*d+u[1]*(r+1))),{x:n,y:t}},i.calPxToGridXY=function(e,r){var n=i.props,t=n.margin,o=n.containerWidth,u=n.cols,d=n.w,l=n.rowHeight,a=Math.round(e/o*u),c=Math.round(r/(l+(t?t[1]:0)));return oe(u,a,c,d)},i.calWHtoPx=function(e,r){var n,t,o=i.props,u=o.margin,d=o.rowHeight;return u||(u=[0,0]),"number"==typeof e&&(n=Math.round(e*i.calcolsWidth()+(e-1)*u[0])),"number"==typeof r&&(t=Math.round(r*d+(r-1)*u[1])),{wPx:n,hPx:t}},i.calPxToWH=function(e,r){var n=i.props,t=n.rowHeight,o=n.cols,u=n.GridX,d=i.calcolsWidth();return function(e,r,n,i){var t=n,o=i;return"number"==typeof r&&"number"==typeof n&&"number"==typeof i&&(r+n>e-1&&(t=e-r),n<1&&(t=1),i<1&&(o=1)),{w:t,h:o}}(o,u,Math.round((e-.5*d)/d),Math.round((r-.5*t)/t))},i.addEventParams=function(e){var r=i.props;return ve({GridX:r.GridX,GridY:r.GridY,w:r.w,h:r.h,uniqueKey:r.uniqueKey,margin:r.margin,forbid:r.forbid,handle:r.handle,direction:r.direction},e)},i.onStart=function(e,r){var n,t,o,u;if(r&&i.canDrag()){i.setState({dragType:re.Start}),i.lastZindex=null==r||null===(n=r.node)||void 0===n||null===(t=n.style)||void 0===t?void 0:t.zIndex,"999"!=(null==r||null===(o=r.node)||void 0===o||null===(u=o.style)||void 0===u?void 0:u.zIndex)&&(r.node.style.zIndex="999");var d=r.x,l=void 0===d?0:d,a=r.y,c=void 0===a?0:a,s=i.calPxToGridXY(l,c),f=s.GridX,v=s.GridY;i.props.onStart&&i.props.onStart(i.addEventParams({GridX:f,GridY:v}),e)}},i.onMove=function(e,r){var n,t;if(r&&i.canDrag()){i.setState({dragType:re.Move}),"999"!=(null==r||null===(n=r.node)||void 0===n||null===(t=n.style)||void 0===t?void 0:t.zIndex)&&(r.node.style.zIndex="999");var o=r.x,u=void 0===o?0:o,d=r.y,l=void 0===d?0:d,a=i.calPxToGridXY(u,l),c=a.GridX,s=a.GridY;i.props.onMove&&i.props.onMove(i.addEventParams({GridX:c,GridY:s}),e)}},i.onEnd=function(e,r){if(r&&i.canDrag()){i.setState({dragType:re.End}),r.node.style.zIndex=i.lastZindex;var n=r.x,t=void 0===n?0:n,o=r.y,u=void 0===o?0:o,d=i.calPxToGridXY(t,u),l=d.GridX,a=d.GridY;i.props.onEnd&&i.props.onEnd(i.addEventParams({GridX:l,GridY:a}),e)}},i.onResizeStart=function(e,r){var n,t,o,u;r&&i.canResize()&&(i.setState({dragType:re.ResizeStart}),i.lastZindex=null==r||null===(n=r.node)||void 0===n||null===(t=n.style)||void 0===t?void 0:t.zIndex,"999"!=(null==r||null===(o=r.node)||void 0===o||null===(u=o.style)||void 0===u?void 0:u.zIndex)&&(r.node.style.zIndex="999"),i.props.onResizeStart&&i.props.onResizeStart(i.addEventParams({}),e))},i.onResizing=function(e,r){var n,t;if(r&&i.canResize()){i.setState({dragType:re.Resizing}),"999"!=(null==r||null===(n=r.node)||void 0===n||null===(t=n.style)||void 0===t?void 0:t.zIndex)&&(r.node.style.zIndex="999");var o=r.width,u=r.height,d=i.calPxToWH(o,u),l=d.w,a=d.h;i.props.onResizing&&i.props.onResizing(i.addEventParams({w:l,h:a}),e)}},i.onResizeEnd=function(e,r){if(r&&i.canResize()){i.setState({dragType:re.ResizeEnd}),r.node.style.zIndex=i.lastZindex;var n=r.width,t=r.height,o=i.calPxToWH(n,t),u=o.w,d=o.h;i.props.onResizeEnd&&i.props.onResizeEnd(i.addEventParams({w:u,h:d}),e)}},i.canDrag=function(){var e=i.props,r=e.direction,n=e.forbid,t=null===le.DragDirectionCode||void 0===le.DragDirectionCode?void 0:Z()(le.DragDirectionCode).call(le.DragDirectionCode,(function(e){return null==r?void 0:Y()(r).call(r,e)}));return!n&&t},i.canResize=function(){var e=i.props,r=e.direction,n=e.forbid,t=null===ue.ResizeDirectionCode||void 0===ue.ResizeDirectionCode?void 0:Z()(ue.ResizeDirectionCode).call(ue.ResizeDirectionCode,(function(e){return null==r?void 0:Y()(r).call(r,e)}));return!n&&t},i.lastZindex="",i.state={dragType:void 0},i}return D()(n,[{key:"render",value:function(){var e,r,n=this.props,i=n.w,t=n.h,o=n.style,u=n.bounds,d=n.GridX,l=n.GridY,a=n.handle,c=n.direction,s=n.children,f=n.className,v=this.state.dragType,p=this.calGridXYToPx(d,l),h=p.x,b=p.y,y=this.calWHtoPx(i,t),m=y.wPx,G=y.hPx,g=se()((null==s||null===(e=s.props)||void 0===e?void 0:e.className)||"",f),x=null===(r=v&&[re.Move,re.Resizing])||void 0===r?void 0:Y()(r).call(r,v);return R.a.createElement(ae.a,{className:g,direction:this.canDrag()?c:[],bounds:u,handle:a,onStart:this.onStart,onMove:this.onMove,onEnd:this.onEnd,x:h,y:b,style:ve(ve({},o),{},{position:"absolute",transition:x||!this.canDrag()?"":"all .2s ease-out"})},R.a.createElement(de.a,{onResizeStart:this.onResizeStart,onResizeMoving:this.onResizing,onResizeEnd:this.onResizeEnd,direction:this.canResize()?c:[],width:m,height:G},s))}}]),n}(R.a.Component);function be(e,r){var n=t()(e);if(u.a){var i=u()(e);r&&(i=l()(i).call(i,(function(r){return c()(e,r).enumerable}))),n.push.apply(n,i)}return n}function ye(e){for(var r=1;r<arguments.length;r++){var n,i,t=null!=arguments[r]?arguments[r]:{};r%2?f()(n=be(Object(t),!0)).call(n,(function(r){m()(e,r,t[r])})):p.a?Object.defineProperties(e,p()(t)):f()(i=be(Object(t))).call(i,(function(r){Object.defineProperty(e,r,c()(t,r))}))}return e}he.defaultProps={cols:12,containerWidth:500,containerPadding:[0,0],margin:[10,10],rowHeight:30,w:1,h:1,direction:N()(ne=[]).call(ne,q()(le.DragDirectionCode),q()(ue.ResizeDirectionCode))};var me=R.a.forwardRef((function(e,r){var n,i,t,o=Object(w.useState)([]),u=g()(o,2),d=u[0],l=u[1],a=Object(w.useState)(),c=g()(a,2),s=c[0],f=c[1],v=Object(w.useState)({}),p=g()(v,2),h=p[0],y=p[1],m=Object(w.useRef)();Object(w.useImperativeHandle)(r,(function(){return{getLayout:G}}));var G=function(){return d};Object(w.useEffect)((function(){X(e.layout,null==e?void 0:e.cols)}),[e.layout,null==e?void 0:e.cols]);var x,j,X=function(e,r){var n=function(e,r){for(var n=q()(e),i=0;i<(null==e?void 0:e.length)-1;i++){var t,o;n[i].GridX=null===(t=oe(r,n[i].GridX,n[i].GridY,n[i].w))||void 0===t?void 0:t.GridX,n[i].GridY=null===(o=oe(r,n[i+1].GridX,n[i+1].GridY,n[i+1].w))||void 0===o?void 0:o.GridY,U(n[i],n[i+1])&&(n=$(n,n[i]))}return n}(e,r),i=te(n,void 0);l(i)},P=function(r,n){f(re.Start),y({GridX:null==r?void 0:r.GridX,GridY:null==r?void 0:r.GridY,w:null==r?void 0:r.w,h:null==r?void 0:r.h}),e.onStart&&e.onStart(r,d,void 0,n)},E=function(r,n){f(re.Move);var i=$(d,r),t=te(i,r);l(t),y((function(e){return ye(ye({},e),{},{GridX:null==r?void 0:r.GridX,GridY:null==r?void 0:r.GridY})})),e.onMove&&e.onMove(r,d,t,n)},S=function(r,n){f(re.End);var i=te(d,void 0);l(i),e.onEnd&&e.onEnd(r,d,i,n)},O=function(r,n){f(re.ResizeStart),y({GridX:null==r?void 0:r.GridX,GridY:null==r?void 0:r.GridY,w:null==r?void 0:r.w,h:null==r?void 0:r.h}),e.onResizeStart&&e.onResizeStart(r,d,void 0,n)},M=function(r,n){var i=$(d,r),t=te(i,r);l(t),y((function(e){return ye(ye({},e),{},{w:null==r?void 0:r.w,h:null==r?void 0:r.h})})),e.onResizing&&e.onResizing(r,d,t,n)},D=function(r,n){f(re.ResizeEnd);var i=te(d,void 0);l(i),e.onResizeEnd&&e.onResizeEnd(r,d,i,n)},T=se()("DraggerLayout",null==e?void 0:e.className);return R.a.createElement("div",{ref:m,className:T,style:ye(ye({},null==e?void 0:e.style),{},{position:"relative",width:(null==e?void 0:e.width)||(null===(n=m.current)||void 0===n||null===(i=n.style)||void 0===i?void 0:i.width),height:(x=function(e){for(var r,n=0,i=0,t=e.length;i<t;i++){var o=e[i];"number"==typeof o.GridY&&"number"==typeof o.h&&(r=o.GridY+o.h)>n&&(n=r)}return n}(d),j=e.padding?e.padding[0]:e.margin[0],x*e.rowHeight+(x-1)*e.margin[0]+2*j+"px")})},z()(t=R.a.Children).call(t,null==e?void 0:e.children,(function(r){if(r)return function(r){if(null!=d&&d.length){var n,i=null==r?void 0:r.key,t=function(e,r){for(var n=0,i=null==e?void 0:e.length;n<i;n++)if(e[n].uniqueKey===r)return e[n]}(d,i);if(!t)return;return R.a.createElement(he,b()({},t,{margin:null==e?void 0:e.margin,cols:null==e?void 0:e.cols,bounds:m.current,containerWidth:null==e?void 0:e.width,containerPadding:null!==(n=null==e?void 0:e.padding)&&void 0!==n?n:[0,0],rowHeight:null==e?void 0:e.rowHeight,onStart:P,onMove:E,onEnd:S,uniqueKey:i,onResizeStart:O,onResizing:M,onResizeEnd:D}),r)}}(r)})),function(){var r,n;if(s&&!Y()(r=[re.End,re.ResizeEnd]).call(r,s))return R.a.createElement(he,{margin:null==e?void 0:e.margin,cols:null==e?void 0:e.cols,bounds:m.current,containerWidth:null==e?void 0:e.width,containerPadding:null!==(n=null==e?void 0:e.padding)&&void 0!==n?n:[0,0],rowHeight:null==e?void 0:e.rowHeight,style:{background:"rgba(15,15,15,0.3)",transition:" all .15s ease-out"},GridX:h.GridX,GridY:h.GridY,w:h.w,h:h.h,direction:[]},R.a.createElement("div",null))}())}));r.default=me}]);