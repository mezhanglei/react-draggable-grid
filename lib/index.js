!function(e,r){if("object"===typeof exports&&"object"===typeof module)module.exports=r();else if("function"===typeof define&&define.amd)define([],r);else{var n=r();for(var i in n)("object"===typeof exports?exports:e)[i]=n[i]}}(self,(function(){return function(){"use strict";var e={n:function(r){var n=r&&r.__esModule?function(){return r.default}:function(){return r};return e.d(n,{a:n}),n},d:function(r,n){for(var i in n)e.o(n,i)&&!e.o(r,i)&&Object.defineProperty(r,i,{enumerable:!0,get:n[i]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r:function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{DragGridItem:function(){return ye},DragTypes:function(){return ie},default:function(){return Ye}});var n=require("@babel/runtime-corejs3/core-js/object/keys"),i=e.n(n),o=require("@babel/runtime-corejs3/core-js/object/get-own-property-symbols"),t=e.n(o),d=require("@babel/runtime-corejs3/core-js/instance/filter"),u=e.n(d),l=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptor"),a=e.n(l),c=require("@babel/runtime-corejs3/core-js/instance/for-each"),s=e.n(c),v=require("@babel/runtime-corejs3/core-js/object/get-own-property-descriptors"),f=e.n(v),p=require("@babel/runtime-corejs3/core-js/object/define-properties"),h=e.n(p),b=require("@babel/runtime-corejs3/core-js/object/define-property"),y=e.n(b),G=require("@babel/runtime-corejs3/helpers/extends"),m=e.n(G),g=require("@babel/runtime-corejs3/helpers/defineProperty"),Y=e.n(g),z=require("@babel/runtime-corejs3/helpers/slicedToArray"),j=e.n(z),w=require("@babel/runtime-corejs3/core-js/instance/includes"),R=e.n(w),X=require("@babel/runtime-corejs3/core-js/instance/map"),x=e.n(X),q=require("react"),E=e.n(q),S=require("@babel/runtime-corejs3/core-js/reflect/construct"),P=e.n(S),D=require("@babel/runtime-corejs3/helpers/toConsumableArray"),M=e.n(D),T=require("@babel/runtime-corejs3/helpers/classCallCheck"),C=e.n(T),H=require("@babel/runtime-corejs3/helpers/createClass"),I=e.n(H),W=require("@babel/runtime-corejs3/helpers/inherits"),O=e.n(W),K=require("@babel/runtime-corejs3/helpers/possibleConstructorReturn"),Z=e.n(K),k=require("@babel/runtime-corejs3/helpers/getPrototypeOf"),N=e.n(k),_=require("@babel/runtime-corejs3/core-js/instance/some"),A=e.n(_),B=require("@babel/runtime-corejs3/core-js/instance/concat"),L=e.n(B),F=require("@babel/runtime-corejs3/core-js/instance/sort"),J=e.n(F),Q=require("copy-anything");function U(e,r){var n=i()(e);if(t()){var o=t()(e);r&&(o=u()(o).call(o,(function(r){return a()(e,r).enumerable}))),n.push.apply(n,o)}return n}function V(e){for(var r=1;r<arguments.length;r++){var n,i,o=null!=arguments[r]?arguments[r]:{};r%2?s()(n=U(Object(o),!0)).call(n,(function(r){Y()(e,r,o[r])})):f()?h()(e,f()(o)):s()(i=U(Object(o))).call(i,(function(r){y()(e,r,a()(o,r))}))}return e}var $=function(e,r){return e.GridX===r.GridX&&e.GridY===r.GridY&&e.w===r.w&&e.h===r.h||"number"===typeof e.GridX&&"number"===typeof r.GridX&&"number"===typeof e.GridY&&"number"===typeof r.GridY&&"number"===typeof e.w&&"number"===typeof r.w&&"number"===typeof e.h&&"number"===typeof r.h&&(!(e.GridX+e.w<=r.GridX)&&(!(e.GridX>=r.GridX+r.w)&&(!(e.GridY+e.h<=r.GridY)&&!(e.GridY>=r.GridY+r.h))))},ee=function(e,r){for(var n=0,i=e.length;n<i;n++)if($(e[n],r))return e[n];return null},re=function(){var e={};return function(r,n){if(n.GridX===e.GridX&&n.GridY===e.GridY&&n.w===e.w&&n.h===e.h)return r;e=V({},n);for(var i=null===n||void 0===n?void 0:n.uniqueKey,o=[],t=0;t<(null===r||void 0===r?void 0:r.length);t++){var d=null===r||void 0===r?void 0:r[t];if("number"===typeof(null===n||void 0===n?void 0:n.GridY)&&"number"===typeof d.GridY&&"number"===typeof d.h)if((null===d||void 0===d?void 0:d.uniqueKey)!==i)if(!$(d,n)||null!==d&&void 0!==d&&d.forbid)null===o||void 0===o||o.push(d);else{var u=void 0;u=n.GridY>d.GridY&&n.GridY<d.GridY+d.h?d.GridY:d.GridY+1;var l=V(V({},d),{},{GridY:u});null===o||void 0===o||o.push(l)}else{var a=V(V({},d),n);null===o||void 0===o||o.push(a)}}return o}}(),ne=function(e){var r,n=(r=e,(0,Q.copy)(r));return null===n||void 0===n?void 0:J()(n).call(n,(function(e,r){return"number"===typeof e.GridY&&"number"===typeof e.GridX&&"number"===typeof r.GridY&&"number"===typeof r.GridX?e.forbid||r.forbid?0:e.GridY===r.GridY?e.GridX-r.GridX:e.GridY-r.GridY:-1}))};var ie,oe,te=function(e,r){if(r.forbid)return r;var n=V(V({},r),{},{uniqueKey:r.uniqueKey+""});if(0===e.length)return V(V({},n),{},{GridY:0});for(;;){var i=ee(e,n);if(i&&"number"===typeof i.GridY&&"number"===typeof i.h)return n.GridY=i.GridY+i.h,n;if("number"===typeof(null===n||void 0===n?void 0:n.GridY)&&(n.GridY--,n.GridY<0))return V(V({},n),{},{GridY:0})}},de=function(){var e={};return function(r,n){if(n){if(e.GridX===n.GridX&&e.GridY===n.GridY&&e.w===n.w&&e.h===n.h&&e.uniqueKey===n.uniqueKey)return r;e=n}for(var i=ne(r),o=Array(r.length),t=[],d=0,u=i.length;d<u;d++){var l=te(t,i[d]);n&&n.uniqueKey===l.uniqueKey&&(n.GridX=l.GridX,n.GridY=l.GridY),t.push(l),o[d]=l}return o}}(),ue=function(e,r,n,i){return"number"===typeof r&&"number"===typeof n&&"number"===typeof i&&(r+i>e-1&&(r=e-i),r<0&&(r=0),n<0&&(n=0)),{GridX:r,GridY:n}},le=require("react-resize-zoom"),ae=e.n(le),ce=require("react-free-draggable"),se=e.n(ce),ve=require("classnames"),fe=e.n(ve);function pe(e,r){var n=i()(e);if(t()){var o=t()(e);r&&(o=u()(o).call(o,(function(r){return a()(e,r).enumerable}))),n.push.apply(n,o)}return n}function he(e){for(var r=1;r<arguments.length;r++){var n,i,o=null!=arguments[r]?arguments[r]:{};r%2?s()(n=pe(Object(o),!0)).call(n,(function(r){Y()(e,r,o[r])})):f()?h()(e,f()(o)):s()(i=pe(Object(o))).call(i,(function(r){y()(e,r,a()(o,r))}))}return e}function be(e){var r=function(){if("undefined"===typeof Reflect||!P())return!1;if(P().sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(P()(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=N()(e);if(r){var o=N()(this).constructor;n=P()(i,arguments,o)}else n=i.apply(this,arguments);return Z()(this,n)}}!function(e){e.Start="start",e.Move="move",e.End="end",e.ResizeStart="resizeStart",e.Resizing="resizing",e.ResizeEnd="resizeEnd"}(ie||(ie={}));var ye=function(e){O()(n,e);var r=be(n);function n(e){var i;return C()(this,n),(i=r.call(this,e)).lastZindex=void 0,i.calcolsWidth=function(){var e=i.props,r=e.containerWidth,n=e.cols,o=e.containerPadding,t=e.margin;return t?(r-2*o[0]-t[0]*(n+1))/n:(r-2*o[0]-0*(n+1))/n},i.calGridXYToPx=function(e,r){var n,o,t=i.props,d=t.margin,u=t.rowHeight;return d||(d=[0,0]),"number"===typeof e&&(n=Math.round(e*i.calcolsWidth()+(e+1)*d[0])),"number"===typeof r&&(o=Math.round(r*u+d[1]*(r+1))),{x:n,y:o}},i.calPxToGridXY=function(e,r){var n=i.props,o=n.margin,t=n.containerWidth,d=n.cols,u=n.w,l=n.rowHeight,a=Math.round(e/t*d),c=Math.round(r/(l+(o?o[1]:0)));return ue(d,a,c,u)},i.calWHtoPx=function(e,r){var n,o,t=i.props,d=t.margin,u=t.rowHeight;return d||(d=[0,0]),"number"===typeof e&&(n=Math.round(e*i.calcolsWidth()+(e-1)*d[0])),"number"===typeof r&&(o=Math.round(r*u+(r-1)*d[1])),{wPx:n,hPx:o}},i.calPxToWH=function(e,r){var n=i.props,o=n.rowHeight,t=n.cols,d=n.GridX,u=i.calcolsWidth();return function(e,r,n,i){var o=n,t=i;return"number"===typeof r&&"number"===typeof n&&"number"===typeof i&&(r+n>e-1&&(o=e-r),n<1&&(o=1),i<1&&(t=1)),{w:o,h:t}}(t,d,Math.round((e-.5*u)/u),Math.round((r-.5*o)/o))},i.addEventParams=function(e){var r=i.props;return he({GridX:r.GridX,GridY:r.GridY,w:r.w,h:r.h,uniqueKey:r.uniqueKey,margin:r.margin,forbid:r.forbid,handle:r.handle,direction:r.direction},e)},i.onStart=function(e,r){var n,o,t,d;if(r&&i.canDrag()){i.setState({dragType:ie.Start}),i.lastZindex=null===r||void 0===r||null===(n=r.node)||void 0===n||null===(o=n.style)||void 0===o?void 0:o.zIndex,"999"!=(null===r||void 0===r||null===(t=r.node)||void 0===t||null===(d=t.style)||void 0===d?void 0:d.zIndex)&&(r.node.style.zIndex="999");var u=r.x,l=void 0===u?0:u,a=r.y,c=void 0===a?0:a,s=i.calPxToGridXY(l,c),v=s.GridX,f=s.GridY;i.props.onStart&&i.props.onStart(i.addEventParams({GridX:v,GridY:f}),e)}},i.onMove=function(e,r){var n,o;if(r&&i.canDrag()){i.setState({dragType:ie.Move}),"999"!=(null===r||void 0===r||null===(n=r.node)||void 0===n||null===(o=n.style)||void 0===o?void 0:o.zIndex)&&(r.node.style.zIndex="999");var t=r.x,d=void 0===t?0:t,u=r.y,l=void 0===u?0:u,a=i.calPxToGridXY(d,l),c=a.GridX,s=a.GridY;i.props.onMove&&i.props.onMove(i.addEventParams({GridX:c,GridY:s}),e)}},i.onEnd=function(e,r){if(r&&i.canDrag()){i.setState({dragType:ie.End}),r.node.style.zIndex=i.lastZindex;var n=r.x,o=void 0===n?0:n,t=r.y,d=void 0===t?0:t,u=i.calPxToGridXY(o,d),l=u.GridX,a=u.GridY;i.props.onEnd&&i.props.onEnd(i.addEventParams({GridX:l,GridY:a}),e)}},i.onResizeStart=function(e,r){var n,o,t,d;r&&i.canResize()&&(i.setState({dragType:ie.ResizeStart}),i.lastZindex=null===r||void 0===r||null===(n=r.node)||void 0===n||null===(o=n.style)||void 0===o?void 0:o.zIndex,"999"!=(null===r||void 0===r||null===(t=r.node)||void 0===t||null===(d=t.style)||void 0===d?void 0:d.zIndex)&&(r.node.style.zIndex="999"),i.props.onResizeStart&&i.props.onResizeStart(i.addEventParams({}),e))},i.onResizing=function(e,r){var n,o;if(r&&i.canResize()){i.setState({dragType:ie.Resizing}),"999"!=(null===r||void 0===r||null===(n=r.node)||void 0===n||null===(o=n.style)||void 0===o?void 0:o.zIndex)&&(r.node.style.zIndex="999");var t=r.width,d=r.height,u=i.calPxToWH(t,d),l=u.w,a=u.h;i.props.onResizing&&i.props.onResizing(i.addEventParams({w:l,h:a}),e)}},i.onResizeEnd=function(e,r){if(r&&i.canResize()){i.setState({dragType:ie.ResizeEnd}),r.node.style.zIndex=i.lastZindex;var n=r.width,o=r.height,t=i.calPxToWH(n,o),d=t.w,u=t.h;i.props.onResizeEnd&&i.props.onResizeEnd(i.addEventParams({w:d,h:u}),e)}},i.canDrag=function(){var e=i.props,r=e.direction,n=e.forbid,o=null===ce.DragDirectionCode||void 0===ce.DragDirectionCode?void 0:A()(ce.DragDirectionCode).call(ce.DragDirectionCode,(function(e){return null===r||void 0===r?void 0:R()(r).call(r,e)}));return!n&&o},i.canResize=function(){var e=i.props,r=e.direction,n=e.forbid,o=null===le.ResizeDirectionCode||void 0===le.ResizeDirectionCode?void 0:A()(le.ResizeDirectionCode).call(le.ResizeDirectionCode,(function(e){return null===r||void 0===r?void 0:R()(r).call(r,e)}));return!n&&o},i.lastZindex="",i.state={dragType:void 0},i}return I()(n,[{key:"render",value:function(){var e,r,n=this.props,i=n.w,o=n.h,t=n.style,d=n.bounds,u=n.GridX,l=n.GridY,a=n.handle,c=n.direction,s=n.children,v=n.className,f=this.state.dragType,p=this.calGridXYToPx(u,l),h=p.x,b=p.y,y=this.calWHtoPx(i,o),G=y.wPx,m=y.hPx,g=fe()((null===s||void 0===s||null===(e=s.props)||void 0===e?void 0:e.className)||"",v),Y=null===(r=f&&[ie.Move,ie.Resizing])||void 0===r?void 0:R()(r).call(r,f);return E().createElement(se(),{className:g,direction:this.canDrag()?c:[],bounds:d,handle:a,onStart:this.onStart,onMove:this.onMove,onEnd:this.onEnd,x:h,y:b,style:he(he({},t),{},{position:"absolute",transition:Y||!this.canDrag()?"":"all .2s ease-out"})},E().createElement(ae(),{onResizeStart:this.onResizeStart,onResizeMoving:this.onResizing,onResizeEnd:this.onResizeEnd,direction:this.canResize()?c:[],width:G,height:m},s))}}]),n}(E().Component);function Ge(e,r){var n=i()(e);if(t()){var o=t()(e);r&&(o=u()(o).call(o,(function(r){return a()(e,r).enumerable}))),n.push.apply(n,o)}return n}function me(e){for(var r=1;r<arguments.length;r++){var n,i,o=null!=arguments[r]?arguments[r]:{};r%2?s()(n=Ge(Object(o),!0)).call(n,(function(r){Y()(e,r,o[r])})):f()?h()(e,f()(o)):s()(i=Ge(Object(o))).call(i,(function(r){y()(e,r,a()(o,r))}))}return e}ye.defaultProps={cols:12,containerWidth:500,containerPadding:[0,0],margin:[10,10],rowHeight:30,w:1,h:1,direction:L()(oe=[]).call(oe,M()(ce.DragDirectionCode),M()(le.ResizeDirectionCode))};var ge=E().forwardRef((function(e,r){var n,i,o,t=(0,q.useState)([]),d=j()(t,2),u=d[0],l=d[1],a=(0,q.useState)(),c=j()(a,2),s=c[0],v=c[1],f=(0,q.useState)({}),p=j()(f,2),h=p[0],b=p[1],y=(0,q.useRef)();(0,q.useImperativeHandle)(r,(function(){return{getLayout:G}}));var G=function(){return u};(0,q.useEffect)((function(){g(e.layout,null===e||void 0===e?void 0:e.cols)}),[e.layout,null===e||void 0===e?void 0:e.cols]);var g=function(e,r){var n=function(e,r){for(var n=M()(e),i=0;i<(null===e||void 0===e?void 0:e.length)-1;i++){var o,t;n[i].GridX=null===(o=ue(r,n[i].GridX,n[i].GridY,n[i].w))||void 0===o?void 0:o.GridX,n[i].GridY=null===(t=ue(r,n[i+1].GridX,n[i+1].GridY,n[i+1].w))||void 0===t?void 0:t.GridY,$(n[i],n[i+1])&&(n=re(n,n[i]))}return n}(e,r),i=de(n,void 0);l(i)},Y=function(r,n){v(ie.Start),b({GridX:null===r||void 0===r?void 0:r.GridX,GridY:null===r||void 0===r?void 0:r.GridY,w:null===r||void 0===r?void 0:r.w,h:null===r||void 0===r?void 0:r.h}),e.onStart&&e.onStart(r,u,void 0,n)},z=function(r,n){v(ie.Move);var i=re(u,r),o=de(i,r);l(o),b((function(e){return me(me({},e),{},{GridX:null===r||void 0===r?void 0:r.GridX,GridY:null===r||void 0===r?void 0:r.GridY})})),e.onMove&&e.onMove(r,u,o,n)},w=function(r,n){v(ie.End);var i=de(u,void 0);l(i),e.onEnd&&e.onEnd(r,u,i,n)},X=function(r,n){v(ie.ResizeStart),b({GridX:null===r||void 0===r?void 0:r.GridX,GridY:null===r||void 0===r?void 0:r.GridY,w:null===r||void 0===r?void 0:r.w,h:null===r||void 0===r?void 0:r.h}),e.onResizeStart&&e.onResizeStart(r,u,void 0,n)},S=function(r,n){var i=re(u,r),o=de(i,r);l(o),b((function(e){return me(me({},e),{},{w:null===r||void 0===r?void 0:r.w,h:null===r||void 0===r?void 0:r.h})})),e.onResizing&&e.onResizing(r,u,o,n)},P=function(r,n){v(ie.ResizeEnd);var i=de(u,void 0);l(i),e.onResizeEnd&&e.onResizeEnd(r,u,i,n)},D=fe()("DraggerLayout",null===e||void 0===e?void 0:e.className);return E().createElement("div",{ref:y,className:D,style:me(me({},null===e||void 0===e?void 0:e.style),{},{position:"relative",width:(null===e||void 0===e?void 0:e.width)||(null===(n=y.current)||void 0===n||null===(i=n.style)||void 0===i?void 0:i.width),height:function(){var r=function(e){for(var r,n=0,i=0,o=e.length;i<o;i++){var t=e[i];"number"===typeof t.GridY&&"number"===typeof t.h&&(r=t.GridY+t.h)>n&&(n=r)}return n}(u),n=e.padding?e.padding[0]:e.margin[0];return r*e.rowHeight+(r-1)*e.margin[0]+2*n+"px"}()})},x()(o=E().Children).call(o,null===e||void 0===e?void 0:e.children,(function(r){if(r)return function(r){if(null!==u&&void 0!==u&&u.length){var n,i=null===r||void 0===r?void 0:r.key,o=function(e,r){for(var n=0,i=null===e||void 0===e?void 0:e.length;n<i;n++)if(e[n].uniqueKey===r)return e[n]}(u,i);if(!o)return;return E().createElement(ye,m()({},o,{margin:null===e||void 0===e?void 0:e.margin,cols:null===e||void 0===e?void 0:e.cols,bounds:y.current,containerWidth:null===e||void 0===e?void 0:e.width,containerPadding:null!==(n=null===e||void 0===e?void 0:e.padding)&&void 0!==n?n:[0,0],rowHeight:null===e||void 0===e?void 0:e.rowHeight,onStart:Y,onMove:z,onEnd:w,uniqueKey:i,onResizeStart:X,onResizing:S,onResizeEnd:P}),r)}}(r)})),function(){var r,n;if(s&&!R()(r=[ie.End,ie.ResizeEnd]).call(r,s))return E().createElement(ye,{margin:null===e||void 0===e?void 0:e.margin,cols:null===e||void 0===e?void 0:e.cols,bounds:y.current,containerWidth:null===e||void 0===e?void 0:e.width,containerPadding:null!==(n=null===e||void 0===e?void 0:e.padding)&&void 0!==n?n:[0,0],rowHeight:null===e||void 0===e?void 0:e.rowHeight,style:{background:"rgba(15,15,15,0.3)",transition:" all .15s ease-out"},GridX:h.GridX,GridY:h.GridY,w:h.w,h:h.h,direction:[]},E().createElement("div",null))}())})),Ye=ge;return r}()}));